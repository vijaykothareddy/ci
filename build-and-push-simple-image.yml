---
resources:
# The repo with our Dockerfile
- name: vijay-ci
  type: git
  icon: github
  source:
    uri: https://github.com/vijaykothareddy/ci.git
    branch: master

# Where we will push the image
- name: build-image
  type: docker-image
  source:
    repository: busybox


jobs:
- name: build-and-push
  plan:
  - get: vijay-ci
  - get: build-image
  
  - task: build
    image: build-image
    file: vijay-ci/tasks/build.yml
    params: 
      aws_access_key_id: ((aws-token))
      aws_secret_access_key: ((aws-secret))
      aws_default_region: ap-southeast-2


