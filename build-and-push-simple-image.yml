---
resources:
# The repo with our Dockerfile
- name: concourse-examples
  type: git
  icon: github
  source:
    uri: https://github.com/concourse/examples.git
    branch: master

# Where we will push the image
- name: ecr-docker-reg
  type: docker-image
  source:
    aws_access_key_id: ((aws-token))
    aws_secret_access_key: ((aws-secret))
    repository: ((aws-repo))


jobs:
- name: build-and-push
  plan:
  - get: concourse-examples
  
  - put: ecr-docker-reg
    params:
      build: concourse-examples/Dockerfiles/simple
